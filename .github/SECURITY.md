# Security Policy

## Supported Versions

| Version | Supported |
|---------|-----------|
| 2.0.x | :white_check_mark: Current |
| 1.4.x | :warning: Security fixes only |
| 1.3.x | :warning: Security fixes only |
| < 1.3 | :x: Not supported |

We recommend always running the latest version. Use `npx chati-dev check-update` to verify.

---

## Reporting a Vulnerability

If you discover a security vulnerability in Chati.dev, please report it responsibly.

### How to Report

1. **Do NOT** open a public GitHub issue for security vulnerabilities
2. Use [GitHub Security Advisories](https://github.com/ogabrielalonso/Chati.dev/security/advisories/new) to report privately
3. Include:
   - Description of the vulnerability
   - Steps to reproduce
   - Potential impact assessment
   - Affected versions
   - Suggested fix (if any)

### Response Timeline

| Stage | Timeline |
|-------|----------|
| **Acknowledgment** | Within 48 hours |
| **Initial assessment** | Within 5 business days |
| **Fix development** | Depends on severity (see below) |
| **Patch release** | Coordinated with reporter |

### Severity Classification

| Severity | Response Time | Examples |
|----------|--------------|---------|
| **Critical** | 72 hours | Remote code execution, credential exposure |
| **High** | 1 week | Agent prompt injection allowing system escape, path traversal in installer |
| **Medium** | 2 weeks | Information disclosure, insecure defaults |
| **Low** | Next release | Minor configuration issues, cosmetic security warnings |

---

## Scope

### In Scope

| Area | Examples |
|------|---------|
| **Agent System** | Prompt injection that bypasses Session Lock or Constitution enforcement |
| **CLI Installer** | Path traversal, command injection, arbitrary file write |
| **Session State** | Credential exposure in session.yaml or CLAUDE.md |
| **System Files** | Injection via templates, workflows, or intelligence files |
| **Memory Layer** | Unauthorized access to stored memories across projects |
| **Generated Artifacts** | Secrets or credentials in generated code or documentation |

### Out of Scope

- Vulnerabilities in third-party npm dependencies (report to upstream maintainers)
- Issues requiring physical access to the machine
- Social engineering attacks
- Denial of service via resource exhaustion
- Security issues in the user's own project code (not generated by Chati.dev)

---

## Security Architecture

### Design Principles

1. **Least Privilege**: Agents operate within their designated scope (Article I, XI)
2. **No Secrets in System**: Credentials are referenced by name only — never stored (Article IV)
3. **Session Isolation**: `.chati/session.yaml` and `.chati/memories/` are gitignored by default
4. **Constitution Enforcement**: Security violations halt the pipeline (Article IV)
5. **Session Lock**: Active sessions cannot be bypassed to access raw AI mode (Article XV)

### Security-Relevant Constitution Articles

| Article | Security Control |
|---------|-----------------|
| **IV** | No destructive operations without confirmation. No secrets in system files. SAST mandatory. |
| **XI** | Mode governance restricts write scope. Clarity mode cannot modify project code. |
| **XIII** | Memory Layer never auto-modifies user files. Proposals require explicit approval. |
| **XV** | Session Lock prevents accidental system escape. Exit requires explicit intent. |
| **XVI** | Model governance — no downgrade from assigned model. Cost tracking logged in session. |

---

## Security Best Practices

When using Chati.dev:

1. **Never commit secrets**: Ensure `.env`, credentials, and API keys are in `.gitignore`
2. **Review generated files**: Check `CLAUDE.md` and session.yaml before sharing projects
3. **Keep updated**: Run `npx chati-dev check-update` regularly
4. **Verify installations**: Run `npx chati-dev health` to validate system integrity
5. **Audit memories**: Periodically review `.chati/memories/` for sensitive content
6. **Use SAST**: The QA-Implementation agent runs SAST scanning — don't skip it

---

## Disclosure Policy

We follow [responsible disclosure](https://en.wikipedia.org/wiki/Responsible_disclosure):

1. Reporter submits vulnerability via email
2. We acknowledge receipt within 48 hours
3. We develop and test a fix
4. We coordinate release timing with the reporter
5. We publish the fix with a security advisory
6. We credit the reporter (unless they prefer anonymity)

---

<p align="center">
  <sub>Security is a pipeline requirement, not an afterthought.</sub><br>
  <sub>Chati.dev &copy; 2026</sub>
</p>
